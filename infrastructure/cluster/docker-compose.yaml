version: "3.9"

services:
  node1:
    image: genai-node:latest
    container_name: node1
    hostname: node1
    ports:
      - "2221:22"            # host:container (SSH)
    networks:
      - cluster-net
    restart: unless-stopped

  node2:
    image: genai-node:latest
    container_name: node2
    hostname: node2
    ports:
      - "2222:22"
    networks:
      - cluster-net
    restart: unless-stopped

  node3:
    image: genai-node:latest
    container_name: node3
    hostname: node3
    ports:
      - "2223:22"
    networks:
      - cluster-net
    restart: unless-stopped

networks:
  cluster-net:
    external: true           # reuse the existing Docker network
    name: cluster-net
